#实习记录

##引言

从七月初为了找实习忙得手忙脚乱心惊胆战，到现在坐在宽敞的工位上等待bug时的无所忌惮，四个月的实习期，过得太快，快得我都快记不清我做了什么，只记得每天的任务仓仓促促但最后也都能在截止日期之前做完，忙里偷闲，也都是常事儿，与学校里莫名荒唐的生活相比，忙是很忙，但是忙得很单纯，只管撸起袖子加油干就行，远不似在学校时候的顶着老师的声音学自己的东西时的焦虑和担心。

可能是高中时候好学生当惯了吧，感觉在大学里时刻有着一个东西逼着自己，不能放开心态去专心自己的事情，成绩是一个巨大的枷锁，盘在我们的脖子上，虽然我们都没有好好听课或者认真思考，但总是有东西在催促你不断地焦虑，这些东西有如 期末的考试，一次作业，一个奖学金，一次acm刷题，都是一种排名，而你的功课成绩便会一丝不挂地躺在别人面前，我试图找过好多种机会说服自己不要去相信，不要去关心这些琐事，这些烦躁地过程，但是最终显然都是无济于事，没办法啊，毕竟没法不在乎别人的评价，每次成绩都会贴到你的脸上，说你如何如何，烦心之事，数不胜数。

所以我珍惜这一个暑假，虽然我每天有九个多小时都要在公司里敲代码，但是这至少都是我喜欢的或者是我擅长的，最最关键的啊，是我乐意去践行，而不是被逼着去做这个事情。

还有很关键的一点，在这个团队里面，有一半的人都是程序员，大家每天都要和代码打交道，每天都要commit 和debug ，有问题可以相互交流，可以求助别人，可以申请延长期限，有赫姐帮我撑腰，有卓哥可以帮我顶住bug的压力，尽管最后都会由我去主管这个问题的解决，但是并没有人会来责怪，在这里，我被理解了。

那为什么要离开这里呢，原因有很多，直接的原因是时间真的协调不过来，当初在面试的时候，卓哥说的每周五天到岗真的吓得我心发慌，毕竟这太难了，我在暑假期间一度害怕六个月的合同我只能履行两个月，所以在暑假期间我就一直担心开学的事情。
于是呢，这个学期开始我没有抱任何一门选修课，就是怕时间不够，在已经很匆忙的日子里，公司每天都要占据我八个小时的时间，暑假我每天可以休息很长时间，我可以早上八点半起，七点下班。开学之后，每天七点半起，十点下班，1点睡觉，没有午觉，是常有的事儿。

所以，我痛恨这个每天都有早课的学校，痛恨这个安排老旧的课程计划的学校，痛恨不负责的老师，痛恨繁杂而荒谬的活动，是啊，痛恨。

所以我每天都在纠结，因为太想脱离世俗而去，而一不小心，老师就开始点名，我想，自己教不好书的老师才会通过点名来提高课堂参与率，真正能吧课堂教的有声有色的老师，才不会在乎有没有人翘课。（待考证）

但是还是不行，我有一个女朋友了现在，我很在乎她的想法，我担心她会因为我的作为而心里不平衡，会因为我的放弃而跟着我一起走，我是不希望她这么做的，因为这是一条痕艰辛的特立独行的路，这是一条有去难回的路。我仍希望她足够有能力去撇开这些枷锁桎梏，我仍担心她以此自我逃避。

我明白走出舒适区，直面痛点的重要，我已经踏上这一步，走了太远，回头已经是很难的事情了。

第二个要离开敦煌的原因是SocialShops的团队技术水平已经不能满足我了，尽管最后整个app都是我在负责新功能的推进了，但我仍然希望有一个技术更厉害的人能够带领我走出我的舒适区，为我的挑战指出方向。赫姐是我很佩服的女生，我还没有见过自驱力如此强而且易于理解难题的女生（可能是我接触沈露琪多了），但我仍觉得赫姐不像我的榜样，我从她身上，好像只看到了懒懒的感觉。

另外一点是，我当真很佩服卓哥，他像，不，他是一个真正的领导，他能够承担上级的压力，也能够带领下级，鞭策以及教育下级。卓哥是一个技术和幽默两不差的人，我非常非常佩服他，我想我也要成为他那样的人，对上级负责，对下级也负责。他像一面旗帜。

我讨厌东杰。不认同娟姐的生活方式，但她对我很好，我也很喜欢她。
有很多冷漠的人，也有很多热心肠的人，有很老套的人，也有单纯善良的人。
我很感谢洲哥，从入职第一天他带我跟各位打招呼，到每次打完球一起回去，我不能忘记洲哥给我的关心，我觉得我跟他像一个年纪的人，好像，他就是我的学长。

荣耀太油滑了，不能交心，可以同游。

##新知

*新学到的技术啊，有很多，有很多是以前一个人瞎摸摸不到的。*

###团队协作
**Git**

赫姐一开始让我用source tree可以它的win客户端不好看而且难用，于是我开始尝试Android Studio自带的git，发现好用异常

But, 我不那么认同赫姐对与代码提交的管理，两个人提交到一个分支，我们总是会发生冲突

**CI**

持续集成，我们用的是Jenkens，那应该是非常好玩的东西，有一个自己的内网服务器，等以后有机会了一定要试一试，我想试试Jetbrains 的Teamcity

**多语言翻译系统**

由于这次的项目主要是给海外客户使用的App，所以我们各端都使用了多语言翻译系统，我们移动被要求统一字符串key的使用，之后这个系统可以对接产品经理，由她去负责寻找翻译。

###Android

主战场来了

**现在画界面套路更多了**
-
- 以前不用的Relative Layout ，用了之后才发现有多么方便，直接居中
- 以前老是用的ConstraintLayout ， 现在也不敢常用了，因为代码量太大了，我曾考虑用style解决，但是我想着这个项目以前的架构，以及重构的复杂度，没有敢动手
- linearLayout还是很强大的，layout-weight这个强大的属性，要善用

**首次尝试了Android上的Socket通信**
-
- 事情并不简单，我只是试图去理解这个架构而已，之后我一定会在自己的app里面实现一版socket的 自定义通讯协议 的 IM框架
- BIO 的 SSLSocket也还是很好用的，但是还是被Android坑了不少回，当然这里的好用其实也仅限BIO，而NIO的SSLEngine着实让人有点不愿恭维

**Android 7.0 的适配**
- 
- 坑多于好处，我的感觉是安卓在逐渐地加大对开发者的管制
- content provider 对文件共享的 限制
- 内部实现库的更换，导致了一些诸如 加密 诸如 nio 的变化，虽然并不会导致原理规范的代码的故障，但是会暴露原来并不规范写法的错误。
- 不敢想象Android 8.0 适配的痛苦

**开始对于Bug 以及 陌生API 从源码层面深究其原因，作用以及后果**
-
- 比如对于工作项目中BIO在7.0之后两个线程死锁的问题，最终定位到的是7.0一个内部库函数中的synchronize同步块的死锁，但是直觉告诉我，BIO的线程没有理由会发生死锁，因为这和BIO的功能是完全相悖的，最终发现问题出在BIO的代码应用代码上，我们代码中的socketThread是由NIO的channel产生的，可能在Android6.0之前，官方是允许通过configureBloking（True ）的方式来开启线程，但是在7.0中禁止了这种做法，毕竟想想也是蛮奇怪的的不是嘛
- BottomSheetDialog设置Behavior，作为一个官方控件，但是开放的Api却相当少，上StackOverflowFlow搜了搜，发现只有对于BottomSheets设置Behavior的操作，但是我看在项目已经做了大半的原因上，我于是试图去找到它的behavior，通过翻看源码（安卓能看到源码真是好事情，当然最该怪不清楚的文档），发现其设置了一个CoordinatorLayout包裹了我们的Dialog，所以只要getparent 就可以get到Behavior了

**开始学习并遵照官方要求的做法去做**
-
- 一如 对于RecyclerView的使用，我们总是错误地使用RecyclerView，比如禁用它的NestedScroll让它成为一个铺写内容的工具，而不是发挥它本身真正在滚动地时候Recycler，即回收viewholder重复利用的作用，所以当我们通过各种方式禁用RecyclerView的上下滑动时，RecyclerView的最大优势之一 -- 性能就被放弃了，我之前把RV放在ScrollView中 ，导致每次弹出键盘导致界面AdjustResize的时候，RV开始重绘所有Holder，因此每次输入都会导致巨大的渲染开销，直接导致主线程卡顿。
- 然而当时的我仍然深信不疑在ScrollView中内嵌RV来显示多个条目，并且试图通过手动（使用自定义动画）使得界面上移来禁止其重绘，但是
- 安卓并没有开放对键盘 弹出事件 设置Listener的API，关于键盘的状态我们在AdjustResize的情况下根本无从得知。于是我放弃了这个尝试，转而考虑把RV上面的内容作为RV的header来显示的方式
- 这里通过博客发现了一个非常棒的RecyclerView的Wrapper，可以包裹原Adapter以实现header和footer的添加，在这里实在是非常感谢hongyang。


**滚动卡顿**
-
- 安卓官方并不推荐具有滚动功能的控件发生嵌套关系。View的focus以及点击事件传递仍然是一个值得我学习的重点。

**为了实现效果不择手段**
-
- 很明显的一个例子是，Edit Text在内容过长时并不能显示Elepsize（即尾部的省略号） ， 我以为是EditText的功能缺失，然后赫姐告诉我通过判断focus来替换显示为TextView的暴力解法，的确达到了目标，但是及其不优美。
- 工业产品似乎不再如独立开发时候那么在乎每个细节是否精致，哪个地方是否尽善尽美，那是一种应付目标的错误行为，至少在我看来是这般可怕，不能开发优美打产品，存在于这里似乎又少了一分意义。

###任然要学习的东西

- 团队协作工具
- 使用多种style来优化界面开发
- 优化网络Response基类



